<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>B Admin Reference | Lewis &amp; Clark BLT Documentation</title>
  <meta name="description" content="Documentation for using the Lewis &amp; Clark BLT computing cluster" />
  <meta name="generator" content="bookdown 0.10.2 and GitBook 2.6.7" />

  <meta property="og:title" content="B Admin Reference | Lewis &amp; Clark BLT Documentation" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Documentation for using the Lewis &amp; Clark BLT computing cluster" />
  <meta name="github-repo" content="watzek/BLTdocs" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="B Admin Reference | Lewis &amp; Clark BLT Documentation" />
  
  <meta name="twitter:description" content="Documentation for using the Lewis &amp; Clark BLT computing cluster" />
  

<meta name="author" content="Ben Glick, Jeremy McWilliams, others!" />


<meta name="date" content="2019-06-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="job-history.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><img src="blt_logo.png" id="logo"></a></li>
<li><a href="./">Lewis & Clark BLT Cluster Docs</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="about-the-cluster.html"><a href="about-the-cluster.html"><i class="fa fa-check"></i><b>1</b> About the Cluster</a><ul>
<li class="chapter" data-level="1.1" data-path="about-the-cluster.html"><a href="about-the-cluster.html#cluster-facts"><i class="fa fa-check"></i><b>1.1</b> Cluster Facts</a></li>
<li class="chapter" data-level="1.2" data-path="about-the-cluster.html"><a href="about-the-cluster.html#interacting-with-the-login-node"><i class="fa fa-check"></i><b>1.2</b> Interacting with the Login Node</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="getting-connected.html"><a href="getting-connected.html"><i class="fa fa-check"></i><b>2</b> Getting Connected</a><ul>
<li class="chapter" data-level="2.1" data-path="getting-connected.html"><a href="getting-connected.html#accounts"><i class="fa fa-check"></i><b>2.1</b> Accounts</a></li>
<li class="chapter" data-level="2.2" data-path="getting-connected.html"><a href="getting-connected.html#getting-on-the-network"><i class="fa fa-check"></i><b>2.2</b> Getting on the network</a><ul>
<li class="chapter" data-level="2.2.1" data-path="getting-connected.html"><a href="getting-connected.html#for-windows-and-osx-users"><i class="fa fa-check"></i><b>2.2.1</b> For Windows and OSX Users</a></li>
<li class="chapter" data-level="2.2.2" data-path="getting-connected.html"><a href="getting-connected.html#for-linux-users"><i class="fa fa-check"></i><b>2.2.2</b> For Linux Users</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="getting-connected.html"><a href="getting-connected.html#logging-in"><i class="fa fa-check"></i><b>2.3</b> Logging In</a></li>
<li class="chapter" data-level="2.4" data-path="getting-connected.html"><a href="getting-connected.html#adding-files-to-your-home-directory"><i class="fa fa-check"></i><b>2.4</b> Adding Files to Your Home Directory</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="submitting-jobs.html"><a href="submitting-jobs.html"><i class="fa fa-check"></i><b>3</b> Submitting Jobs</a><ul>
<li class="chapter" data-level="3.1" data-path="submitting-jobs.html"><a href="submitting-jobs.html#checking-usage"><i class="fa fa-check"></i><b>3.1</b> Checking Usage</a></li>
<li class="chapter" data-level="3.2" data-path="submitting-jobs.html"><a href="submitting-jobs.html#a-note-on-data"><i class="fa fa-check"></i><b>3.2</b> A Note on Data</a></li>
<li class="chapter" data-level="3.3" data-path="submitting-jobs.html"><a href="submitting-jobs.html#jobs-on-the-blt-cluster"><i class="fa fa-check"></i><b>3.3</b> Jobs on the BLT Cluster</a><ul>
<li class="chapter" data-level="3.3.1" data-path="submitting-jobs.html"><a href="submitting-jobs.html#grid-engine"><i class="fa fa-check"></i><b>3.3.1</b> Grid Engine</a></li>
<li class="chapter" data-level="3.3.2" data-path="submitting-jobs.html"><a href="submitting-jobs.html#batch-jobs"><i class="fa fa-check"></i><b>3.3.2</b> Batch Jobs</a></li>
<li class="chapter" data-level="3.3.3" data-path="submitting-jobs.html"><a href="submitting-jobs.html#parallel-jobs"><i class="fa fa-check"></i><b>3.3.3</b> Parallel Jobs</a></li>
<li class="chapter" data-level="3.3.4" data-path="submitting-jobs.html"><a href="submitting-jobs.html#gpu-jobs"><i class="fa fa-check"></i><b>3.3.4</b> GPU Jobs</a></li>
<li class="chapter" data-level="3.3.5" data-path="submitting-jobs.html"><a href="submitting-jobs.html#deleting-a-job"><i class="fa fa-check"></i><b>3.3.5</b> Deleting A Job</a></li>
<li class="chapter" data-level="3.3.6" data-path="submitting-jobs.html"><a href="submitting-jobs.html#parsl-workflows"><i class="fa fa-check"></i><b>3.3.6</b> Parsl Workflows</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="parsl-workflows-1.html"><a href="parsl-workflows-1.html"><i class="fa fa-check"></i><b>4</b> Parsl Workflows</a><ul>
<li class="chapter" data-level="4.1" data-path="parsl-workflows-1.html"><a href="parsl-workflows-1.html#about-parsl"><i class="fa fa-check"></i><b>4.1</b> About Parsl</a></li>
<li class="chapter" data-level="4.2" data-path="parsl-workflows-1.html"><a href="parsl-workflows-1.html#using-parsl"><i class="fa fa-check"></i><b>4.2</b> Using Parsl</a></li>
<li class="chapter" data-level="4.3" data-path="parsl-workflows-1.html"><a href="parsl-workflows-1.html#parsl-configuration"><i class="fa fa-check"></i><b>4.3</b> Parsl Configuration</a></li>
<li class="chapter" data-level="4.4" data-path="parsl-workflows-1.html"><a href="parsl-workflows-1.html#defining-a-parsl-workflow"><i class="fa fa-check"></i><b>4.4</b> Defining a Parsl Workflow</a></li>
<li class="chapter" data-level="4.5" data-path="parsl-workflows-1.html"><a href="parsl-workflows-1.html#running-a-parsl-workflow"><i class="fa fa-check"></i><b>4.5</b> Running a Parsl Workflow</a></li>
<li class="chapter" data-level="4.6" data-path="parsl-workflows-1.html"><a href="parsl-workflows-1.html#video-tutorial"><i class="fa fa-check"></i><b>4.6</b> Video Tutorial</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="setting-up-groups.html"><a href="setting-up-groups.html"><i class="fa fa-check"></i><b>5</b> Setting up Groups</a><ul>
<li class="chapter" data-level="5.1" data-path="setting-up-groups.html"><a href="setting-up-groups.html#senario-for-groups"><i class="fa fa-check"></i><b>5.1</b> Senario for Groups</a></li>
<li class="chapter" data-level="5.2" data-path="setting-up-groups.html"><a href="setting-up-groups.html#procedures"><i class="fa fa-check"></i><b>5.2</b> Procedures</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="job-history.html"><a href="job-history.html"><i class="fa fa-check"></i><b>A</b> Job History</a></li>
<li class="chapter" data-level="B" data-path="admin-reference.html"><a href="admin-reference.html"><i class="fa fa-check"></i><b>B</b> Admin Reference</a><ul>
<li class="chapter" data-level="B.0.1" data-path="admin-reference.html"><a href="admin-reference.html#software-installations-and-changes"><i class="fa fa-check"></i><b>B.0.1</b> Software Installations and Changes</a></li>
<li class="chapter" data-level="B.0.2" data-path="admin-reference.html"><a href="admin-reference.html#general-notes"><i class="fa fa-check"></i><b>B.0.2</b> General Notes</a></li>
<li class="chapter" data-level="B.0.3" data-path="admin-reference.html"><a href="admin-reference.html#sqlite3"><i class="fa fa-check"></i><b>B.0.3</b> SQLite3</a></li>
<li class="chapter" data-level="B.0.4" data-path="admin-reference.html"><a href="admin-reference.html#a-note-on-python"><i class="fa fa-check"></i><b>B.0.4</b> A Note On Python</a></li>
<li class="chapter" data-level="B.0.5" data-path="admin-reference.html"><a href="admin-reference.html#python36"><i class="fa fa-check"></i><b>B.0.5</b> Python36</a></li>
<li class="chapter" data-level="B.0.6" data-path="admin-reference.html"><a href="admin-reference.html#jupyterhub-notebook-server"><i class="fa fa-check"></i><b>B.0.6</b> JupyterHub Notebook Server</a></li>
<li class="chapter" data-level="B.0.7" data-path="admin-reference.html"><a href="admin-reference.html#apache-httpd-web-server"><i class="fa fa-check"></i><b>B.0.7</b> Apache Httpd Web Server</a></li>
<li class="chapter" data-level="B.0.8" data-path="admin-reference.html"><a href="admin-reference.html#owncloud"><i class="fa fa-check"></i><b>B.0.8</b> OwnCloud</a></li>
<li class="chapter" data-level="B.0.9" data-path="admin-reference.html"><a href="admin-reference.html#dropbox-cli"><i class="fa fa-check"></i><b>B.0.9</b> Dropbox CLI</a></li>
<li class="chapter" data-level="B.0.10" data-path="admin-reference.html"><a href="admin-reference.html#shellinabox"><i class="fa fa-check"></i><b>B.0.10</b> Shellinabox</a></li>
<li class="chapter" data-level="B.0.11" data-path="admin-reference.html"><a href="admin-reference.html#prottest"><i class="fa fa-check"></i><b>B.0.11</b> ProtTest</a></li>
<li class="chapter" data-level="B.0.12" data-path="admin-reference.html"><a href="admin-reference.html#mrbayes"><i class="fa fa-check"></i><b>B.0.12</b> MrBayes</a></li>
<li class="chapter" data-level="B.0.13" data-path="admin-reference.html"><a href="admin-reference.html#paml"><i class="fa fa-check"></i><b>B.0.13</b> PAML</a></li>
<li class="chapter" data-level="B.0.14" data-path="admin-reference.html"><a href="admin-reference.html#modeller"><i class="fa fa-check"></i><b>B.0.14</b> MODELLER</a></li>
<li class="chapter" data-level="B.0.15" data-path="admin-reference.html"><a href="admin-reference.html#star"><i class="fa fa-check"></i><b>B.0.15</b> STAR</a></li>
<li class="chapter" data-level="B.0.16" data-path="admin-reference.html"><a href="admin-reference.html#raxml"><i class="fa fa-check"></i><b>B.0.16</b> RAxML</a></li>
<li class="chapter" data-level="B.0.17" data-path="admin-reference.html"><a href="admin-reference.html#intel-opencl-runtime"><i class="fa fa-check"></i><b>B.0.17</b> Intel OpenCL Runtime</a></li>
<li class="chapter" data-level="B.0.18" data-path="admin-reference.html"><a href="admin-reference.html#hashcat"><i class="fa fa-check"></i><b>B.0.18</b> Hashcat</a></li>
<li class="chapter" data-level="B.0.19" data-path="admin-reference.html"><a href="admin-reference.html#set-up-procedure-for-classesprojects"><i class="fa fa-check"></i><b>B.0.19</b> Set up procedure for classes/projects</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Lewis &amp; Clark BLT Documentation</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="admin-reference" class="section level1">
<h1><span class="header-section-number">B</span> Admin Reference</h1>
<div id="software-installations-and-changes" class="section level3">
<h3><span class="header-section-number">B.0.1</span> Software Installations and Changes</h3>
<p>This page is intended to document all of the software installation that has been done so that we can re-do it if ever necessary. When something is installed on the cluster, you should document what it is, where it is installed, and how you installed it on this page. Note that small things like python packages do not need to be documented here.</p>
</div>
<div id="general-notes" class="section level3">
<h3><span class="header-section-number">B.0.2</span> General Notes</h3>
<p>When you install something, please download the compressed (<code>.tar.gz</code>/<code>.zip</code>/<code>.bz2&lt;/code&gt;</code>…) file to <code>/local/downloads/</code>. Please leave uncompressed source code there too. Do not remove either of those after installing the software.</p>
</div>
<div id="sqlite3" class="section level3">
<h3><span class="header-section-number">B.0.3</span> SQLite3</h3>
<p>We have (and must have) a slightly non-standard installation of SQLite. This just has to do with where everything is installed on our cluster’s parallel filesystem. Because of this, we need to install sqlite3 from source instead of using <code>yum install sqlite3</code>. To do this, I essentially followed the tutorial <a href="https://bluebill.net/2016/04/24/install-python-and-sqlite-from-source/">here</a>. All of the dependencies needed to install sqlite3 should be installed already. The exact commands used (which can be rerun verbatim if needed) are below. Make sure you install python <em>after</em> this, because it uses header files that are only included with the distribution of SQLite3.</p>
<pre><code>cd /local/downloads/
wget https://www.sqlite.org/2018/sqlite-autoconf-3220000.tar.gz
tar xf ./sqlite-autoconf-3220000.tar.gz
cd ./sqlite-autoconf-3120200.tar.gz
./configure --prefix=/local/cluster --disable-static --enable-fts5 --enable-json1 CFLAGS=&quot;-g -O2 -DSQLITE_ENABLE_FTS3=1 -DSQLITE_ENABLE_FTS4=1 -DSQLITE_ENABLE_RTREE=1&quot;
make
make install</code></pre>
</div>
<div id="a-note-on-python" class="section level3">
<h3><span class="header-section-number">B.0.4</span> A Note On Python</h3>
<p>Installing, configuring and managing python on a cluster like ours is frankly a mess. We have at least 5 different python interpreters installed, all of which have their own packages and package managers. If you change the configuration of any of them, please be very careful. Make sure you’re using the right ‘pip’ tool by either calling the fully-qualified path (e.g. ‘<code>/local/cluster/bin/pip</code>’) or by saying <code>which pip</code> and ensuring that the selected one is in <code>/local/cluster/bin/</code>. Please do not install packages or make changes to the python in <code>/usr/bin/python</code>. This python is important for the <code>yum</code> package manager.</p>
</div>
<div id="python36" class="section level3">
<h3><span class="header-section-number">B.0.5</span> Python36</h3>
<p>Because of the way they are bundled, Python3 must be installed <em>after</em> sqlite3 is installed. It is installed from source using the following commands, which were adapted from the same tutorial as we used to get SQLite3 (available <a href="https://bluebill.net/2016/04/24/install-python-and-sqlite-from-source/">here</a>).</p>
<p>The exact commands I ran are below:</p>
<pre><code>cd /local/downloads/
wget https://www.python.org/ftp/python/3.6.4/Python-3.6.4.tgz
tar xf ./Python-3.5.1.tgz
cd ./Python-3.5.1

LD_RUN_PATH=/local/cluster/lib/ LD_LIBRARY_PATH=/local/cluster/lib/ ./configure --prefix=/local/cluster LDFLAGS=&quot;-L/local/cluster/lib&quot; CPPFLAGS=&quot;-I /local/cluster/include&quot;

LD_RUN_PATH=/local/cluster/lib/ LD_LIBRARY_PATH=/local/cluster/lib/ make
LD_RUN_PATH=/local/cluster/lib/ LD_LIBRARY_PATH=/local/cluster/lib/ make test
LD_RUN_PATH=/local/cluster/lib/ LD_LIBRARY_PATH=/local/cluster/lib/ make install</code></pre>
<p>Python 2 can be installed essentially identically, except with different version numbers on the things you download.</p>
</div>
<div id="jupyterhub-notebook-server" class="section level3">
<h3><span class="header-section-number">B.0.6</span> JupyterHub Notebook Server</h3>
<p><a href="http://jupyterhub.readthedocs.io/en/latest/">Jupyterhub</a> is the program we use to serve the multi-user notebook server located at <a href="mayo.blt.lclark.edu:8000" class="uri">mayo.blt.lclark.edu:8000</a>. Installation of jupyterhub is easy. You can install it with ‘sudo /local/cluster/bin/pip3 install jupyterhub’. To run jupyterhub, start a screen or tmux session, run the command <code>PATH=/local/cluster/bin/:$PATH; cd /local/cluster/jupyterhub-runtime/jupyterhub_run/ &amp;&amp; jupyterhub -f jupyterhub_config.py</code>. Then detach the screen. Configuration is in the file <code>/local/cluster/jupyterhub-runtime/jupyterhub_config.py</code></p>
<p>I needed to make an IPTables entry allowing traffic in and out on port 8000. If you need to change the port, remember to make a new iptables entry.</p>
<p>Jupyterhub example user password (for use case demonstrations): user:example, pass:processtruster76</p>
</div>
<div id="apache-httpd-web-server" class="section level3">
<h3><span class="header-section-number">B.0.7</span> Apache Httpd Web Server</h3>
<p>We installed apache2 with the standard <code>sudo yum install httpd</code>. Apache2 is currently serving from its default server root at <code>/var/www/html</code>. PHP v5.4.16 was also installed, and has its configuration at <code>/etc/php.ini</code></p>
<p>I needed to make an IPTables entry allowing traffic in and out on port 80. If you need to change the port, remember to make a new iptables entry.</p>
</div>
<div id="owncloud" class="section level3">
<h3><span class="header-section-number">B.0.8</span> OwnCloud</h3>
<p>OwnCloud is essentially a google drive clone that will run on our cluster. We automatically create user owncloud accounts upon user creation and we also symlink their file dropbox to their home directory. For help with installation, follow this tutorial <a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-owncloud-on-centos-7">here</a>.</p>
</div>
<div id="dropbox-cli" class="section level3">
<h3><span class="header-section-number">B.0.9</span> Dropbox CLI</h3>
<p>Follow page <a href="https://www.dropbox.com/install-linux">here</a>. Our install location is somewhere else, in <code>/local/cluster/dropbox_dist</code>.</p>
</div>
<div id="shellinabox" class="section level3">
<h3><span class="header-section-number">B.0.10</span> Shellinabox</h3>
<p>Shellinabox is a browser-based method to access command line on mayo. Once signed in to VPN, shellinabox is accessible at <a href="http://mayo.blt.lclark.edu/shell/" class="uri">http://mayo.blt.lclark.edu/shell/</a>. The installation is at <code>/local/cluster/shellinabox</code>. If it goes down, navigate to that directory, and run the startup script: <code>./shellinabox</code></p>
</div>
<div id="prottest" class="section level3">
<h3><span class="header-section-number">B.0.11</span> ProtTest</h3>
<p>ProtTest is a bioinformatic tool for the selection of best-fit models of aminoacid replacement for the data at hand. ProtTest makes this selection by finding the model in the candidate list with the smallest Akaike Information Criterion (AIC), Bayesian Information Criterion (BIC) score or Decision Theory Criterion (DT). At the same time, ProtTest obtains model-averaged estimates of different parameters (including a model-averaged phylogenetic tree) and calculates their importance(Posada and Buckley 2004). ProtTest differs from its nucleotide analog jModeltest (Posada 2008) in that it does not include likelihood ratio tests, as not all models included in ProtTest are nested. It is written in java with MPJ, and it has a fairly strange installation. It’s installed to <code>/local/cluster/prottest3</code>, and needs to be run from there. People should not put data files in that directory. It can be run something like this: <code>cd $PROTTEST_HOME java -jar prottest-3.4.2.jar -i examples/COX2_PF0016/alignment -all-matrices -all-distributions -threads 2</code></p>
</div>
<div id="mrbayes" class="section level3">
<h3><span class="header-section-number">B.0.12</span> MrBayes</h3>
<p>MrBayesis a program used for Bayesian inference of phylogeny. It’s installed normally. Instructions for building from source are <a href="https://github.com/NBISweden/MrBayes">here</a>.</p>
</div>
<div id="paml" class="section level3">
<h3><span class="header-section-number">B.0.13</span> PAML</h3>
<p>PAML needs to be installed on a per-user basis. It needs to be copied into the user’s home directory and it’s internal <code>bin</code> directory needs to be added to the user’s PATH. It’s compiled executables are in <code>/local/downloads/paml4.9g</code>.</p>
</div>
<div id="modeller" class="section level3">
<h3><span class="header-section-number">B.0.14</span> MODELLER</h3>
<p>MODELLER is A Program for Protein Structure Modeling. It’s a special python interpreter which is installed normally in /local/cluster/bin/</p>
</div>
<div id="star" class="section level3">
<h3><span class="header-section-number">B.0.15</span> STAR</h3>
<p>STAR (Spliced Transcripts Alignment to a Reference) is a bioinformatics tool to align large ENCODE Transcriptome RNA-seq datasets. Its executables (STAR and STARlong) are in /local/cluster/bin. Background on STAR can be found <a href="https://www.ncbi.nlm.nih.gov/pubmed/23104886" target="_blank">here</a>, and full docs are <a href="https://github.com/alexdobin/STAR/blob/master/doc/STARmanual.pdf" target="_blank">here</a>.</p>
</div>
<div id="raxml" class="section level3">
<h3><span class="header-section-number">B.0.16</span> RAxML</h3>
<p>RAxML is a maximum likelihood phylogenetic bioinformatic tool. It’s installed normally. However, there are two versions installed. There is an MPI version (suitable for tasks of size 48 slots or more) as well as a shared memory pool version (suitable for 48 slots or fewer). If you are using exactly 48 slots, flip a coin. The MPI version can be run with <code>raxmlHPC-MPI-AVX2</code> and the SMP version can be run with <code>raxmlHPC-PTHREADS-AVX2</code></p>
</div>
<div id="intel-opencl-runtime" class="section level3">
<h3><span class="header-section-number">B.0.17</span> Intel OpenCL Runtime</h3>
<p>The Intel OpenCL Runtime is required to run OpenCL programs on Intel CPUs. The latest packages are available <a href="https://software.intel.com/en-us/articles/opencl-drivers">here</a> under OpenCL Runtime for Intel Core and Intel Xeon Processors. To install, run the install script and select <code>/local/cluster</code> as the target prefix. The files will be installed in <code>/local/cluster/opt/intel</code>. Be sure to symlink the libraries in <code>/local/cluster/opt/intel/opencl-${version_number}/lib64</code> to <code>/local/cluster/lib</code>:</p>
<pre><code>find &quot;$(realpath /local/cluster/opt/intel/opencl)/lib64/&quot; -type f -name &#39;*.so*&#39; -print0 \
  | xargs -0 ln -s -t /local/cluster/lib</code></pre>
<p>We are explicitly linking to the libraries in the version specific directory since the generic symlink requires <code>/etc/alternatives/opencl*</code> which won’t be recreated on worker nodes.</p>
<p>Setting up OpenCL to run on worker nodes will require some additional work. The OpenCL runtime searches for platform specific ICDs in <code>/etc/OpenCL/vendors</code> by default. While the documentation states that this search path can be modified with an environment variable, <code>OPENCL_VENDOR_PATH</code>, it seems that not all ICD loader implementations support this. As a temporary workaround, we will recreate this directory structure in <code>/local/cluster/etc/opencl_icd_fix</code>:</p>
<pre><code>fixdir=&#39;/local/cluster/etc/opencl_icd_fix&#39;
for d in &quot;$fixdir&quot; &quot;${fixdir}/vendors&quot;; do
    if ! [ -d &quot;$d&quot; ]; then
        mkdir &quot;$d&quot;
    fi
done
find &quot;$(realpath /local/cluster/opt/intel/opencl)/etc/&quot; -type f -name &#39;*.icd&#39; -print0 \
  | xargs -0 ln -s -t &quot;${fixdir}/vendors&quot;</code></pre>
<p>If <code>OPENCL_VENDOR_PATH</code> worked with the implementation shipped with Intel’s runtime, we could just set it to our fix directory. Unfortunately, it does not. We need to create symlinks in each worker node:</p>
<pre><code>ln -s /local/cluster/etc/opencl_icd_fix /etc/OpenCL</code></pre>
</div>
<div id="hashcat" class="section level3">
<h3><span class="header-section-number">B.0.18</span> Hashcat</h3>
<p>Hashcat is a suite of password cracking tools. It requires OpenCL supported devices along with the appropriate OpenCL runtimes and drivers. The latest release is available <a href="https://hashcat.net/hashcat/">here</a>. To install hashcat, first download the source tarball and untar it. Since hashcat lacks a configure script, we’ll need to edit the Makefile manually. Find the definition of the <code>PREFIX</code> in the Makefile and define it as <code>/local/cluster</code>. Then run <code>make</code> and <code>make install</code>.</p>
</div>
<div id="set-up-procedure-for-classesprojects" class="section level3">
<h3><span class="header-section-number">B.0.19</span> Set up procedure for classes/projects</h3>
<p>Classes and projects often require shared materials (files/folders/etc.). We are able to do this with UNIX groups. To make a UNIX group for a class, first ensure that all students who need to be in the group have user accounts on the system.</p>
<p>Then, create the group: <code>groupadd &lt;GROUP NAME&gt;</code></p>
<p>Create a shared folder in <code>/home/data</code>, and set its’ owner and permissions accordingly: <code>mkdir /home/data/&lt;GROUP NAME&gt; chown &lt;OWNER&gt;:&lt;GROUP NAME&gt; /home/data/&lt;GROUP NAME&gt; chmod 755 /home/data/&lt;GROUP NAME&gt;</code> where <code>&lt;OWNER&gt;</code> is the username of the group owner (usually professor)</p>
<p>Now, add all the students to the group as follows (you can do this individually as follows or automate it as after that):</p>
<pre><code>usermod -a -G &lt;GROUP NAME&gt; &lt;STUDENT USERNAME&gt;</code></pre>
<p>To do this automatically, do the following:</p>
<p>First, create a file which contains a student’s username on each line, like so:</p>
<pre><code>jimmy
timmy
tommy
terry
jerry</code></pre>
<p>Save this file as <code>users.txt</code>. Then, run the following script, changing the group name as necessary:</p>
<pre><code>gn=&lt;GROUP NAME&gt;
while read p; do
  usermod -a -G $gn $p
done &lt;users.txt</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="job-history.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
